# =============================================================================
# Tmux Configuration
# =============================================================================
# References:
# - https://www.hamvocke.com/blog/a-guide-to-customizing-your-tmux-conf/
# - https://github.com/tony/tmux-config/blob/master/.tmux.conf

# -----------------------------------------------------------------------------
# General Settings
# -----------------------------------------------------------------------------
set-option -sa terminal-overrides ',xterm-256color:RGB'
set -sg escape-time 1

# Reload config with prefix + r
bind r source-file ~/.tmux.conf \; display-message "Config reloaded"

# -----------------------------------------------------------------------------
# Prefix & Key Bindings
# -----------------------------------------------------------------------------
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# Show/hide status bar
bind a set -g status

# Vim-style pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Window split bindings
bind b split-window -h
bind v split-window -v

# -----------------------------------------------------------------------------
# Copy Mode (Vi Style)
# -----------------------------------------------------------------------------
setw -g mode-keys vi

# Selection
bind-key -T copy-mode-vi v send-keys -X begin-selection
bind-key -T copy-mode-vi V send-keys -X select-line
bind-key -T copy-mode-vi r send-keys -X rectangle-toggle

# Copy to system clipboard (macOS: pbcopy, Linux: xsel)
bind-key -T copy-mode-vi y send-keys -X copy-pipe-and-cancel "pbcopy"
bind-key p run "pbpaste | tmux load-buffer - ; tmux paste-buffer"

# Mouse drag to copy
bind-key -T copy-mode-vi MouseDragEnd1Pane send -X copy-pipe-and-cancel "pbcopy"
bind-key -T copy-mode MouseDragEnd1Pane send -X copy-pipe-and-cancel "pbcopy"

# -----------------------------------------------------------------------------
# Windows & Panes
# -----------------------------------------------------------------------------
set -g base-index 1
set-option -g allow-rename off

# Pane borders
set-option -g pane-border-style fg=colour240
set-option -g pane-active-border-style fg=colour75

set-option -g display-panes-active-colour colour75
set-option -g display-panes-colour colour240

# -----------------------------------------------------------------------------
# Status Bar
# -----------------------------------------------------------------------------
set-option -g status on
set-option -g status-interval 2
set-option -g status-justify "centre"

set-option -g status-fg colour245

set-option -g status-left-length 40
set-option -g status-right-length 40

set-option -g status-left "#[fg=colour69]❯ #S"
set-option -g status-right "#[fg=colour75]%Y-%m-%d %H:%M #[fg=colour69]❮"
set-option -g status-style bg=default

# Window status
set-window-option -g window-status-current-format "#[fg=colour208,bold] #W "
set-window-option -g window-status-format "#[fg=colour245] #I:#W "

# Clock
set-window-option -g clock-mode-colour colour75

# Messages
set-option -g message-style fg=colour167

# -----------------------------------------------------------------------------
# Mouse Mode
# -----------------------------------------------------------------------------
set -g mouse on

