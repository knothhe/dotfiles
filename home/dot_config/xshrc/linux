# Linux specific shell configuration

# alias
alias copy="wl-copy"
alias pacmancn='sudo pacman --config /etc/pacman.d/archlinuxcn'
alias zed="zeditor"

# ssh
# ensure ssh-agent systemd enabled
if ! systemctl --user is-active --quiet ssh-agent.service; then
  systemctl --user enable --now ssh-agent.service >/dev/null 2>&1
fi

# if ssh agent not add secret, then add it
if ! ssh-add -l &>/dev/null; then
  KEY="$HOME/.ssh/github_knothhe"
  if [ -f "$KEY" ]; then
    ssh-add "$KEY" </dev/null >/dev/null 2>&1
  fi
fi

# x_update function - prompt and execute system update with proxy management
x_omarchy_update() {
  echo "This will execute: proxyon && omarchy-update && proxyoff && pacman -Syu --config /etc/pacman.d/archlinuxcn"
  read -p "Do you want to continue? (y/N): " -n 1 -r
  echo
  if [[ $REPLY =~ ^[Yy]$ ]]; then
    proxyon && omarchy-update && proxyoff && sudo pacman -Syu --config /etc/pacman.d/archlinuxcn
  else
    echo "Update cancelled."
  fi
}
